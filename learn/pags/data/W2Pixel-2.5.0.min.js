var esp,c,espatt1,espatt2,espatt3,pixelAP,pegaIDespW2P,mudaIDappendChild,modSVGCANVAS,pixelTAMx,pixelTAMy,pixelESPx,pixelESPy,wColorPixelApoio,newPointX,newPointY,numberIDespW2P,allpixelradius,colorStroke,ESPEstroke,colorFill,classXX,classYY,pasteX,pasteY,moveX,moveY,classpixelX,classpixelY,numnpx,numnpy,medidaXespace,medidaYespace,cx,wvir,modecontrol,pixelTAMx2,pixelTAMy2,pixelESPx2,pixelESPy2,idxy,logID,logIDx,logIDy,DP={espTAM:400,nPixelXy:10,IDespW2P:"w2p"};function wRadius(e){allpixelradius=e}function wStroke(e,t){0==e&&(colorStroke=null,ESPEstroke=0),colorStroke=e,ESPEstroke=t}function wFill(e){null==colorFill&&(colorFill="#000"),colorFill=e}function wDeform(e,t){null==e&&(e=1),0==e&&(e=0,t=0),null==t&&(t=1),pasteX=e,pasteY=t}function wMove(e,t){null==e&&(e=0),0==e&&(e=0,t=0),null==t&&(t=0),moveX=e,moveY=t}function wHelpPoints(){"svg"==modSVGCANVAS&&((pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx),pixelAP.setAttributeNS(null,"height",pixelTAMy),pixelAP.setAttributeNS(null,"fill","#000"),pixelAP.setAttributeNS(null,"x",medidaXespace/2-pixelTAMx/2),pixelAP.setAttributeNS(null,"y",medidaYespace/2-pixelTAMy/2),document.getElementById(mudaIDappendChild).appendChild(pixelAP),(pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx),pixelAP.setAttributeNS(null,"height",pixelTAMy),pixelAP.setAttributeNS(null,"fill","#000"),pixelAP.setAttributeNS(null,"x",medidaXespace/2-pixelTAMx/2),pixelAP.setAttributeNS(null,"y",0),document.getElementById(mudaIDappendChild).appendChild(pixelAP),(pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx),pixelAP.setAttributeNS(null,"height",pixelTAMy),pixelAP.setAttributeNS(null,"fill","#000"),pixelAP.setAttributeNS(null,"x",0),pixelAP.setAttributeNS(null,"y",medidaYespace/2-pixelTAMy/2),document.getElementById(mudaIDappendChild).appendChild(pixelAP),(pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx),pixelAP.setAttributeNS(null,"height",pixelTAMy),pixelAP.setAttributeNS(null,"fill","#000"),pixelAP.setAttributeNS(null,"x",medidaXespace-pixelTAMx),pixelAP.setAttributeNS(null,"y",medidaYespace/2-pixelTAMy/2),document.getElementById(mudaIDappendChild).appendChild(pixelAP),(pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx),pixelAP.setAttributeNS(null,"height",pixelTAMy),pixelAP.setAttributeNS(null,"fill","#000"),pixelAP.setAttributeNS(null,"x",medidaXespace/2-pixelTAMx/2),pixelAP.setAttributeNS(null,"y",medidaYespace-pixelTAMy),document.getElementById(mudaIDappendChild).appendChild(pixelAP)),"canvas"==modSVGCANVAS&&(c.beginPath(),c.fillStyle="#000",c.fillRect(medidaXespace/2-pixelTAMx/2,medidaYespace/2-pixelTAMy/2,pixelTAMx,pixelTAMy),c.fill(),c.closePath(),c.beginPath(),c.fillStyle="#000",c.fillRect(medidaXespace/2-pixelTAMx/2,0,pixelTAMx,pixelTAMy),c.fill(),c.closePath(),c.beginPath(),c.fillStyle="#000",c.fillRect(0,medidaYespace/2-pixelTAMy/2,pixelTAMx,pixelTAMy),c.fill(),c.closePath(),c.beginPath(),c.fillStyle="#000",c.fillRect(medidaXespace-pixelTAMx,medidaYespace/2-pixelTAMy/2,pixelTAMx,pixelTAMy),c.fill(),c.closePath(),c.beginPath(),c.fillStyle="#000",c.fillRect(medidaXespace/2-pixelTAMx/2,medidaYespace-pixelTAMy,pixelTAMx,pixelTAMy),c.fill(),c.closePath())}function wPointPath(e){var t,l,o,n,p,c;t=-1,l=0,o=0,n=0,p=0,c=0;var r=e;for(cont=0;cont<r.length;cont++)c++;for(i=0;i<c/2;i++)++o<=1&&(l++,n=r[++t],p=r[l]),o>=2&&(l+=2,n=r[t+=2]+n,p=r[l]+p),wPoint(n,p)}function wLinePath(e){var t,l,n,p,c,r,a,s;for(t=e,l=-1,n=0,p=0,a=0,s=0,i=0;i<t.length;i++)if(++p<=1&&(n++,c=t[++l],r=t[n],a=c,s=r,d(c,r)),p>=2){if(n+=2,c=t[l+=2],r=t[n],a<c&&s==r||a==c&&s<r||a>c&&s==r||a==c&&s>r){for(x=a;x<c;x++)d(++a,r);for(x=a;x>c;x--)d(--a,r);for(y=s;y<r;y++)d(a,++s);for(y=s;y>r;y--)d(a,--s)}if(a<c&&s<r){for(o=a;o<c;o++)a++,u();function u(){s<r&&s++,d(a,s)}if(s<r)for(k=s;k<r;k++)u()}if(a>c&&s>r){for(o=a;o>c;o--)a--,u();function u(){s>r&&s--,d(a,s)}if(s>r)for(k=s;k>r;k--)u()}if(a>c&&s<r){for(o=a;o>c;o--)a--,u();function u(){s<r&&s++,d(a,s)}if(s<r)for(k=s;k<r;k++)u()}if(a<c&&s>r){for(o=s;o>r;o--)s--,u();function u(){a<c&&a++,d(a,s)}if(a<c)for(k=a;k<c;k++)u()}}function d(e,t){wPoint(e,t)}}function wDiamond(e,t,l,i){var o=0,n=2,p=1;"fix"==i&&(o=1,n=1,p=0);var c=Math.floor(l/2),r=Math.floor(l/2);wLinePath([c+e-o,t,e,r+t]),wLinePath([c+e,t,l-1+e,r+t]),wLinePath([e,r+t,c+e,l-1+t]),wLinePath([l-1+e,r+t,c+e,l-1+t]),3==l&&wPoint(c,r);var a=0,s=p,u=l-1;for(spaceW=c+n;spaceW<l;spaceW++)wLinePath([c+ ++a+e,++s+t,c+a+e,--u+t]),wLinePath([c-a+e,s+t,c-a+e,u+t]),wLinePath([c+e,s-1+t,c+e,u+1+t])}function wCreateObject(e,t,l){var i,o,n,p,c,r,a,s;for(document.addEventListener("keypress",widentifctecla),a=-1,s=0,null==e&&(e=200),null==t&&(t=200),i=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createAttribute("width"),n=document.createAttribute("height"),p=document.createAttribute("style"),o.value=e,n.value=t,p.value="margin-left:10px;",i.setAttributeNode(o),i.setAttributeNode(n),i.setAttributeNode(p),document.body.appendChild(i),cx=document.createElement("div"),c=document.createAttribute("style"),r=document.createAttribute("id"),c.value="position:relative;overflow:scroll;top:10px;left:10px;background-color:#fff;width:200px;height:40px;border:2px solid #000;",r.value="wvisorw",cx.setAttributeNode(c),cx.setAttributeNode(r),document.body.appendChild(cx),pixelESPx2=(pixelTAMx2=e/numnpx-1)+1,pixelESPy2=(pixelTAMy2=t/numnpy-1)+1,y=0;y<numnpy;y++)for(x=0;x<numnpx;x++)++a>numnpx-1&&(s++,a=0),rectt=document.createElementNS("http://www.w3.org/2000/svg","rect"),rectt.setAttributeNS(null,"width",pixelTAMx2),rectt.setAttributeNS(null,"height",pixelTAMy2),rectt.setAttributeNS(null,"fill","#aaa"),rectt.setAttributeNS(null,"x",x*pixelESPx2),rectt.setAttributeNS(null,"y",y*pixelESPy2),rectt.setAttributeNS(null,"id",a+","+s),rectt.setAttributeNS(null,"class","wpd"),rectt.setAttributeNS(null,"onclick","weditoractivepixel("+a+","+s+")"),i.appendChild(rectt);if(null!=l){var u=document.createElement("div"),d=document.createAttribute("style");d.value="position:fixed;top:0px;left:100%;margin-left:-"+e+"px;width:"+e+"px;height:"+t+"px",u.setAttributeNode(d);var A=document.createElement("img"),m=document.createAttribute("src"),P=document.createAttribute("style");P.value="display:fixed;position:relative;z-index:1;width:"+e+"px;height:"+t+"px;",m.value=l,A.setAttributeNode(m),A.setAttributeNode(P);var S=document.createAttribute("style");S.value="top:0px;left:0px;position:absolute;z-index:2;opacity:0.7;",i.setAttributeNode(S),u.appendChild(A),u.appendChild(i),document.body.appendChild(u)}}function wpegaTeclas(e){switch(e){case 113:++modecontrol>2&&(modecontrol=1),wtrocacontrol(modecontrol);break;case 119:window.location.reload();break;case"ctrlz":if(-2!=logIDx&&-1!=logIDy)document.getElementById(logID[logIDx]+","+logID[logIDy]).style.fill="#aaa",wFill("rgba(210,210,210,0.9)"),wPoint(logID[logIDx],logID[logIDy]);logID.splice(logIDx,logIDy),logIDx>-2&&logIDy>-1&&(logIDx-=2,logIDy-=2),-2==logIDx&&-1==logIDy&&logID.splice(0),cx.innerHTML=logID}}function widentifctecla(e){var t=(e=e||window.event).which||e.keyCode;(e.which||90==e.keyCode)&&e.ctrlKey&&(t="ctrlz"),wpegaTeclas(t)}function weditoractivepixel(e,t){var l;wvir++,idxy=e+","+t,wFill("#000"),wMove(3,3),wDeform(-6,-6),wStroke("#fff",1),logID.push(e,t),logIDx+=2,logIDy+=2,wPoint(e,t),l=document.getElementById(idxy);var i=document.createAttribute("rx");i.value="0",l.setAttributeNode(i),l.style.fill="#000",cx.innerHTML=logID}function wtrocacontrol(e){var t=-1,l=-1,o=0;if(1==e)for(i=0;i<numnpx*numnpy;i++){t++,(p=document.querySelectorAll(".wpd")[t]).removeAttribute("onclick");var n=document.createAttribute("onmouseenter");++l>numnpx-1&&(o++,l=0),n.value="weditoractivepixel("+l+","+o+")",p.setAttributeNode(n)}if(2==e)for(i=0;i<numnpx*numnpy;i++){var p;t++,(p=document.querySelectorAll(".wpd")[t]).removeAttribute("onmouseenter");n=document.createAttribute("onclick");++l>numnpx-1&&(o++,l=0),n.value="weditoractivepixel("+l+","+o+")",p.setAttributeNode(n)}}function wObject(e){var t,i,o,n=e;for(t=-1,i=0,o=0,l=0;l<e.length/2;l++)++o<=1&&(t++,i++),o>=2&&(t+=2,i+=2),wPoint(n[t],n[i])}function wClear(){c.beginPath(),c.clearRect(0,0,medidaXespace,medidaYespace),c.closePath()}function w2pixelCanvas(e,t,l,i,o){modSVGCANVAS="canvas",ccc=0,w2pixel(e,t,l,i,o)}function w2pixel(e,t,l,i,o){if(numnpx=l,numnpy=i,medidaXespace=e,medidaYespace=t,null!=e&&null!=t||(e=DP.espTAM,t=DP.espTAM),numberIDespW2P++,pegaIDespW2P=DP.IDespW2P+numberIDespW2P,mudaIDappendChild=pegaIDespW2P,"svg"==modSVGCANVAS&&(esp=document.createElementNS("http://www.w3.org/2000/svg","svg"),espatt1=document.createAttribute("width"),espatt2=document.createAttribute("height"),espatt3=document.createAttribute("id"),espatt1.value=e,espatt2.value=t,espatt3.value=pegaIDespW2P,esp.setAttributeNode(espatt1),esp.setAttributeNode(espatt2),esp.setAttributeNode(espatt3),document.body.appendChild(esp)),"canvas"==modSVGCANVAS&&(esp=document.createElement("canvas"),(espatt1=document.createAttribute("id")).value=pegaIDespW2P,esp.width=e,esp.height=t,esp.setAttributeNode(espatt1),document.body.appendChild(esp),c=esp.getContext("2d")),null==l&&(l=DP.nPixelXy),null==i&&(i=DP.nPixelXy),pixelESPx=(pixelTAMx=e/l-1)+1,pixelESPy=(pixelTAMy=t/i-1)+1,wColorPixelApoio="rgba(210,210,210,0.9)","svg"==modSVGCANVAS&&(null==o&&(o=!0),1==o))for(y=0;y<i;y++)for(x=0;x<l;x++)++classpixelX>l-1&&(classpixelY++,classpixelX=0),(pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx),pixelAP.setAttributeNS(null,"height",pixelTAMy),pixelAP.setAttributeNS(null,"fill",wColorPixelApoio),pixelAP.setAttributeNS(null,"x",x*pixelESPx),pixelAP.setAttributeNS(null,"y",y*pixelESPy),pixelAP.setAttributeNS(null,"class",classpixelX+"-"+classpixelY),esp.appendChild(pixelAP);if("canvas"==modSVGCANVAS&&(null==o&&(o=!0),1==o))for(y=0;y<i;y++)for(x=0;x<l;x++)c.beginPath(),c.fillStyle="rgba(210,210,210,0.9)",c.fillRect(x*pixelESPx,y*pixelESPy,pixelTAMx,pixelTAMy),c.fill(),c.closePath()}function wRect(e,t,l,i,o){if(newPointX=e*pixelTAMx+e,newPointY=t*pixelTAMy+t,null==o&&null==allpixelradius&&(o=0),null!=allpixelradius&&null==o&&(o=allpixelradius),classXX=0,classYY=0,"svg"==modSVGCANVAS)for(y=0;y<i;y++)for(x=0;x<l;x++)(pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx+pasteX),pixelAP.setAttributeNS(null,"height",pixelTAMy+pasteY),pixelAP.setAttributeNS(null,"fill",colorFill),pixelAP.setAttributeNS(null,"x",newPointX+x*pixelESPx+moveX),pixelAP.setAttributeNS(null,"y",newPointY+y*pixelESPy+moveY),pixelAP.setAttributeNS(null,"rx",o),pixelAP.setAttributeNS(null,"ry",o),pixelAP.setAttributeNS(null,"stroke",colorStroke),pixelAP.setAttributeNS(null,"stroke-width",ESPEstroke),classXX=e+1,classYY=t+1,pixelAP.setAttributeNS(null,"class","r"+classXX+"-"+classYY),document.getElementById(mudaIDappendChild).appendChild(pixelAP);if("canvas"==modSVGCANVAS)for(y=0;y<i;y++)for(x=0;x<l;x++)c.beginPath(),c.strokeStyle=colorStroke,c.lineWidth=ESPEstroke,c.fillStyle=colorFill,c.fillRect(newPointX+x*pixelESPx+moveX,newPointY+y*pixelESPy+moveY,pixelTAMx+pasteX,pixelTAMy+pasteY),null!=ESPEstroke&&(c.strokeRect(newPointX+x*pixelESPx+moveX,newPointY+y*pixelESPy+moveY,pixelTAMx+pasteX,pixelTAMy+pasteY),c.stroke()),c.fill(),c.closePath()}function wPoint(e,t,l){newPointX=e*pixelTAMx+e,newPointY=t*pixelTAMy+t,"svg"==modSVGCANVAS&&(null==l&&null==allpixelradius&&(l=0),null!=allpixelradius&&null==l&&(l=allpixelradius),(pixelAP=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",pixelTAMx+pasteX),pixelAP.setAttributeNS(null,"height",pixelTAMy+pasteY),pixelAP.setAttributeNS(null,"fill",colorFill),pixelAP.setAttributeNS(null,"x",newPointX+moveX),pixelAP.setAttributeNS(null,"y",newPointY+moveY),pixelAP.setAttributeNS(null,"rx",l),pixelAP.setAttributeNS(null,"ry",l),pixelAP.setAttributeNS(null,"stroke",colorStroke),pixelAP.setAttributeNS(null,"stroke-width",ESPEstroke),0==e&&(e=-1),0==t&&(t=-1),classXX=e+1,classYY=t+1,pixelAP.setAttributeNS(null,"class","p"+classXX+"-"+classYY),document.getElementById(mudaIDappendChild).appendChild(pixelAP)),"canvas"==modSVGCANVAS&&(c.beginPath(),c.strokeStyle=colorStroke,c.lineWidth=ESPEstroke,c.fillStyle=colorFill,c.fillStyle=colorFill,c.fillRect(newPointX+moveX,newPointY+moveY,pixelTAMx+pasteX,pixelTAMy+pasteY),null!=ESPEstroke&&(c.strokeRect(newPointX+moveX,newPointY+moveY,pixelTAMx+pasteX,pixelTAMy+pasteY),c.stroke()),c.fill(),c.closePath())}numberIDespW2P=0,colorFill="#000",pasteX=0,pasteY=0,moveX=0,moveY=0,modSVGCANVAS="svg",classpixelX=-1,classpixelY=0,logID=[],logIDx=-2,logIDy=-1,modecontrol=0,wvir=0,document.addEventListener("keypress",function(){var e=e||window.event;e.which||e.keyCode;if((e.which||77==e.keyCode)&&e.ctrlKey&&"ctrlm"=="ctrlm"){if("canvas"==modSVGCANVAS){var t=esp.toDataURL();console.log(t)}if("svg"==modSVGCANVAS){var l=(new XMLSerializer).serializeToString(esp),i=window.btoa(l);console.log("data:image/svg+xml;base64,"+i)}}});